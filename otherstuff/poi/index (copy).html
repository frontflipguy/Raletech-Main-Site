<!DOCTYPE html>
<html>

<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<title>Upward Spiral</title>

</head>

<style>
	
html {
  min-height: 100%;
  display: flex;
  flex-direction: column;
  font-weight: 300;
  line-height: 1.5;
  font-family: 'Lato', sans-serif;
  padding: 0px;
}

body{
	margin: 0px;
	
}

a {
  color: #000000;
  text-decoration: none;
}

div{
	
	align:right;
}

.idiv{
	display: inline-block;
}

.block{
	display: block;
}

.relative{
	position: relative;
}

.navigation{
font-size: 130%;
font-weight: 700;
margin: 0px;
padding: 20px;
border-bottom: 2px solid #000;
border-top: 1px solid #000;
background-color: #909090;
position: fixed;
width:100%;
height: 31px;
z-index: 5;
}

.navigation-button{
font-size: 100%;
background-color: #A1A1A1;
transition: .5s;
border: 1px solid #000;
padding: 14px;
padding-top: 24px;
padding-bottom: 24px;
margin: -4px;
}

.navigation-button:hover{
background-color: #DADADA;
transition: .5s;
}

.navigation-button:active{
	background-color: #EFEFEF;
	transition: 0s;
}

.icon{
	 background: transparent url('/raletechicon.png') no-repeat;
	 background-size: 100%;
	 width: 80px;
	 height: 60px;
	 position: relative;
	 right: 4px; 
	 top: -10px;
	 float: left;
	 margin-right: 16px;
}

.whole-screen{
	background-color: #DDDEED;
	width: 100%;
	height 700px;
	border: 1px solid black;
	z-index: 0;
}

.adiv{
	
}

.bdiv{
	width: 520px;
	height: 520px;
	background-color: #EDEDEE;
	margin: 10px;
	border: 1px solid black;
	padding: 10px;
	border-radius: 5px;
	box-shadow: 0px 0px 9px #888;
	z-index: 1;
	transition: 1s;
	bottom: 100px;
}
	
.canvClass{
	width: 512px;
	height: 512px;
	border: 1px solid black;
	border-radius: 4px;
	background-color: #FFF;
}
	
.little-button{
	padding-right:12px;
	padding-left:12px;
	height: 20px;
	border: 1px solid black;
	border-radius: 4px;
	background-color: #FFF;
	cursor: pointer;
	top: 3px;
}
	
.speed-element{
	width: 40px;
}
	
.tds{
	border: 1px solid black;
	background-color: #EDEEFD;
	padding-right: 6px;
	padding-left: 6px;
}
	
.text-input{
	width: 40px;
}
	
.clockwise{
	width: 158px;	
}

.hard-button{
	padding-right:12px;
	padding-left:4px;
	height: 20px;
	border: 1px solid black;
	border-radius: 4px;
	background-color: #FFF;
	cursor: pointer;
	top: 3px;
	right: 4px;
	margin-right: -8px;
}
	
.column{
	width: 100px;	
}
	
.table1{
	border-collapse: collapse; 
	margin-top: 5px; 
	z-index: 3;	
	box-shadow: 0px 4px 5px #AAA;
}
	
	
.table2{
	border-collapse: collapse; 
	z-index: 2;	
	transition: 1s;
	bottom: 45px;
	box-shadow: 0px 4px 5px #AAA;
}
	
.table3{
	border-collapse: collapse; 
	margin-bottom: 5px; 
	z-index: 1;	
	transition: 1s;
	bottom: 102px;
}
	
	.endpoint{
	width: 28px;
	}

</style>

<body>
<header>
	<div class="navigation">
	<a href="http://www.raletech.com/" class="icon"></a>
	<a href="#" class="navigation-button" id="bye">SPIROGRAPH</a>
	<a style="margin-left: 50px">For the modern human</a>
	</div>
</header>

<div align="center" style="height:100vh; margin-top:70px">
	<div style="margin-top: 90px">

	<!--HTML here-->
		<div id="inst" class="whole-screen relative" align="center">
			<div id="adiv" class="adiv">
				<div id="start" class="little-button idiv relative">start/stop</div> | <div id="trace" class="little-button idiv relative" style="background-color: #888;">Trace</div> | Background: 
				
				<select id="dropdownBG" name="bg">
					<option value="#000">Black</option>
					<option value="#F00">Red</option>
					<option value="#00F">Blue</option>
					<option value="#F0F">Purple</option>
					<option value="#0F0">Green</option>
					<option value="#FF0">Yellow</option>
					<option value="#FFF" selected>White</option>
				</select> |				
				Base Speed: <div class="little-button idiv relative" id="slower">&lt;</div> <input type="text" class="speed-element" id="speedElement" value="5" disabled/> <div class="little-button idiv relative" id="faster">&gt;</div> |
				<div id="supercharge" class="little-button idiv relative" style="display: ">SUPERCHARGE</div>
				
				
				<table class="table1 relative">
					<tr>
						<td class="tds column">Arm1</td>
						<td class="tds">
							<select id="dropdown0" name="arm1">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="arm1" id="lengthArm1" type="number" class="text-input" value="120"/> </td>
						<td class="tds clockwise"><div name="arm1" class="little-button idiv relative" id="arm1cw">Clockwise</div></td>
						<td class="tds">Offset: <input name="arm1" type="number" class="speed-element" id="offsetArm1" value="0"/>&deg;</td>
						<td class="tds"></td>
						<td class="tds">EndPoint: <div name="arm1" id="arm1Ball" class="little-button endpoint idiv relative">Off</div> 
							<select id="dropdown6" name="arm1">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
					<tr>
						<td class="tds">SubArm1</td>
						<td class="tds">
							<select id="dropdown1" name="subArm1">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="subArm1" id="lengthSubArm1" type="number" class="text-input" value="90"/> </td>
						<td class="tds"><div name="subArm1" class="little-button idiv relative" id="subArm1cw">CounterClockwise</div></td>
						<td class="tds">Offset: <input name="subArm1" type="number" class="speed-element" id="offsetSubArm1" value="0"/>&deg;</td>
						<td class="tds">Speed: <input name="subArm1" type="number" class="speed-element" id="subSpeedElement1" value="4" step=".1"/> <div class="idiv" style="cursor:help; display: none" title="Revolutions Per Arm1 Revolution">&#10068;</div></td>
						<td class="tds">EndPoint: <div name="subArm1" id="subArm1Ball" class="little-button endpoint idiv relative">Off</div>
							<select id="dropdown7" name="subArm1">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
					<tr id="tr1" style="display:none">
						<td class="tds">SubSubArm1</td>
						<td class="tds">
							<select id="dropdown12" name="subSubArm1">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="subSubArm1" id="lengthSubSubArm1" type="number" class="text-input" value="90"/> </td>
						<td class="tds"><div name="subSubArm1" class="little-button idiv relative" id="subSubArm1cw">CounterClockwise</div></td>
						<td class="tds">Offset: <input name="subSubArm1" type="number" class="speed-element" id="offsetSubSubArm1" value="0"/>&deg;</td>
						<td class="tds">Speed: <input name="subSubArm1" type="number" class="speed-element" id="subSubSpeedElement1" value="4" step=".1"/></td>
						<td class="tds">EndPoint: <div name="subSubArm1" id="subSubArm1Ball" class="little-button endpoint idiv relative">Off</div>
							<select id="dropdown13" name="subSubArm1">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
				</table>
				
				<!------------------------------------------------------------------------------------------------------------------------------------------>

				<table id="table2"  class="relative table2">
					<tr>
						<td class="tds column"><div class="hard-button idiv relative" id="arm2on">Arm2</div></td>
						<td class="tds">
							<select id="dropdown2" name="arm2">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="arm2" id="lengthArm2" type="number" class="text-input" value="120"/> </td>
						<td class="tds clockwise"><div name="arm2" class="little-button idiv relative" id="arm2cw">CounterClockwise</div></td>
						<td class="tds">Offset: <input name="arm2" type="number" class="speed-element" id="offsetArm2" value="0"/>&deg;</td>
						<td class="tds"></td>
						<td class="tds">EndPoint: <div name="arm2" id="arm2Ball" class="little-button endpoint idiv relative">Off</div>
							<select id="dropdown8" name="arm2">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
					<tr>
						<td class="tds"><div class="hard-button idiv relative" id="subArm2on">SubArm2</div></td>
						<td class="tds">
							<select id="dropdown3" name="subArm2">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="subArm2" id="lengthSubArm2" type="number" class="text-input" value="90"/> </td>
						<td class="tds"><div name="subArm2" class="little-button idiv relative" id="subArm2cw">Clockwise</div></td>
						<td class="tds">Offset: <input name="subArm2" type="number" class="speed-element" id="offsetSubArm2" value="0"/>&deg;</td>
						<td class="tds">Speed: <input name="subArm2" type="number" class="speed-element" id="subSpeedElement2" value="4" step=".1"/></td>
						<td class="tds">EndPoint: <div name="subArm2" id="subArm2Ball" class="little-button endpoint idiv relative">Off</div>
							<select id="dropdown9" name="subArm2">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
					<tr id="tr2" style="display:none">
						<td class="tds"><div class="hard-button idiv relative" id="subSubArm2on">SubSubArm2</div></td>
						<td class="tds">
							<select id="dropdown14" name="subSubArm2">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="subSubArm2" id="lengthSubSubArm2" type="number" class="text-input" value="90"/> </td>
						<td class="tds"><div name="subSubArm2" class="little-button idiv relative" id="subSubArm2cw">CounterClockwise</div></td>
						<td class="tds">Offset: <input name="subSubArm2" type="number" class="speed-element" id="offsetSubSubArm2" value="0"/>&deg;</td>
						<td class="tds">Speed: <input name="subSubArm2" type="number" class="speed-element" id="subSubSpeedElement2" value="4" step=".1"/></td>
						<td class="tds">EndPoint: <div name="subSubArm2" id="subSubArm2Ball" class="little-button endpoint idiv relative">Off</div>
							<select id="dropdown15" name="subSubArm2">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
				</table>
				
				<!------------------------------------------------------------------------------------------------------------------------------------------>

				<table id="table3"  class="relative table3">
					<tr>
						<td class="tds column"><div class="hard-button idiv relative" id="arm3on">Arm3</div></td>
						<td class="tds">
							<select id="dropdown4" name="arm3">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="arm3" id="lengthArm3" type="number" class="text-input" value="120"/> </td>
						<td class="tds clockwise"><div name="arm3" class="little-button idiv relative" id="arm3cw">CounterClockwise</div></td>
						<td class="tds">Offset: <input name="arm3" type="number" class="speed-element" id="offsetArm3" value="90"/>&deg;</td>
						<td class="tds"></td>
						<td class="tds">EndPoint: <div name="arm3" id="arm3Ball" class="little-button endpoint idiv relative">Off</div>
							<select id="dropdown10" name="arm3">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
					<tr>
						<td class="tds"><div class="hard-button idiv relative" id="subArm3on">SubArm3</div></td>
						<td class="tds">
							<select id="dropdown5" name="subArm3">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="subArm3" id="lengthSubArm3" type="number" class="text-input" value="90"/> </td>
						<td class="tds"><div name="subArm3" class="little-button idiv relative" id="subArm3cw">Clockwise</div></td>
						<td class="tds">Offset: <input name="subArm3" type="number" class="speed-element" id="offsetSubArm3" value="0"/>&deg;</td>
						<td class="tds">Speed: <input name="subArm3" type="number" class="speed-element" id="subSpeedElement3" value="4" step=".1"/></td>
						<td class="tds">EndPoint: <div name="subArm3" id="subArm3Ball" class="little-button endpoint idiv relative">Off</div>
							<select id="dropdown11" name="subArm3">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
					<tr id="tr3" style="display:none">
						<td class="tds"><div class="hard-button idiv relative" id="subSubArm3on">SubSubArm3</div></td>
						<td class="tds">
							<select id="dropdown16" name="subSubArm3">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
								<option value="rgba(255, 255, 0, 0.0)">Off</option>
							</select>
						</td>
						<td class="tds">Length: <input name="subSubArm3" id="lengthSubSubArm3" type="number" class="text-input" value="90"/> </td>
						<td class="tds"><div name="subSubArm3" class="little-button idiv relative" id="subSubArm3cw">CounterClockwise</div></td>
						<td class="tds">Offset: <input name="subSubArm3" type="number" class="speed-element" id="offsetSubSubArm3" value="0"/>&deg;</td>
						<td class="tds">Speed: <input name="subSubArm3" type="number" class="speed-element" id="subSubSpeedElement3" value="4" step=".1"/></td>
						<td class="tds">EndPoint: <div name="subSubArm3" id="subSubArm3Ball" class="little-button endpoint idiv relative">Off</div>
							<select id="dropdown17" name="subSubArm3">
								<option value="#000">Black</option>
								<option value="#F00">Red</option>
								<option value="#00F">Blue</option>
								<option value="#F0F">Purple</option>
								<option value="#0F0">Green</option>
								<option value="#FF0">Yellow</option>
								<option value="#FFF">White</option>
							</select>
						</td>
					</tr>
				</table>
				
				<!------------------------------------------------------------------------------------------------------------------------------------------>
				
			</div>
			<div id="bdiv" class="bdiv relative" align="center">
				<canvas id="canv" class="canvClass relative"></canvas>

			</div>
		</div>

	</div>
</div>

<script>

	var i = 0;
	var trace = true;
	var midx = $(canv).width()/2;
	var midy = $(canv).height()/2;
	var start = true;
	var bgColor = "#FFF";
	var t2hidden = false;
	var t3hidden = true;

document.getElementById("canv").getContext("2d").canvas.width = $(canv).width();
document.getElementById("canv").getContext("2d").canvas.height = $(canv).height();

	var ctx = document.getElementById("canv").getContext("2d");
	
class playObj{

		constructor(xloc,yloc,radiusxloc,radiusyloc,color,radius,direction,speed,radiusOn,offset,ballOn,lineOn,endColor,oldradiusxloc,oldradiusyloc){
			this.xloc = xloc;
			this.yloc = yloc;
			this.radiusxloc = radiusxloc;
			this.radiusyloc = radiusyloc;
			this.color = color;
			this.radius = radius;
			this.direction = direction;
			this.speed = speed;
			this.radiusOn = radiusOn;
			this.offset = offset;
			this.ballOn = ballOn;
			this.lineOn = lineOn;
			this.endColor = endColor;
			this.oldradiusxloc = oldradiusxloc;
			this.oldradiusyloc = oldradiusyloc;
		}

		spin(i){
			
			this.radiusxloc = this.xloc + (this.radius*Math.sin(i*(Math.PI/180)));
			this.radiusyloc = this.yloc + (this.radius*Math.sin((i+270)*(Math.PI/180)));
		
		}
	
		futureSpin(i){
			
			this.oldradiusxloc = this.xloc + (this.radius*Math.sin(i*(Math.PI/180)));
			this.oldradiusyloc = this.yloc + (this.radius*Math.sin((i+270)*(Math.PI/180)));
		
		}
	
		draw(color, width){
			ctx.strokeStyle=color;
			ctx.lineWidth=width;
			ctx.beginPath();
			ctx.moveTo(parseInt(this.xloc),parseInt(this.yloc));
			ctx.lineTo(parseInt(this.radiusxloc),parseInt(this.radiusyloc));
			ctx.stroke();
		}
	
		drawBall(color, radius){
			ctx.fillStyle=color;
			ctx.beginPath();
    		ctx.arc(parseInt(this.radiusxloc), parseInt(this.radiusyloc), radius, 0, 2 * Math.PI);
    		ctx.fill();
		}
	
		drawLine(color, width){
			ctx.strokeStyle=color;
			ctx.lineWidth=width;
			ctx.beginPath();
			
			ctx.moveTo(parseInt(this.oldradiusxloc),parseInt(this.oldradiusyloc));
			ctx.lineTo(parseInt(this.radiusxloc),parseInt(this.radiusyloc));
			ctx.stroke();
		}
}
	
	bg = new playObj(midx,midy,midx,midy-180,"#FFF",120,1,5,false,0,false,false,"#FFF",midx,midy-180);

	arm1 = new playObj(midx,midy,midx,midy-180,"#000",120,1,5,true,0,false,false,"#000",midx,midy-180);
	subArm1 = new playObj(midx,midy-arm1.radius,midx,midy-arm1.radius-60,"#000",90,-1,4,true,0,false,false,"#000",midx,midy-180);
	subSubArm1 = new playObj(midx,midy-arm1.radius,midx,midy-arm1.radius-60,"#000",60,1,4,false,0,false,false,"#000",midx,midy-180);
	
	arm2 = new playObj(midx,midy,midx,midy-180,"#000",120,-1,5,false,0,false,false,"#000",midx,midy-180);
	subArm2 = new playObj(midx,midy-arm2.radius,midx,midy-arm2.radius-60,"#000",90,1,4,false,0,false,false,"#000",midx,midy-180);
	subSubArm2 = new playObj(midx,midy-arm1.radius,midx,midy-arm1.radius-60,"#000",60,-1,4,false,0,false,false,"#000",midx,midy-180);

	
	arm3 = new playObj(midx,midy,midx,midy-180,"#000",120,-1,5,false,90,false,false,"#000",midx,midy-180);
	subArm3 = new playObj(midx,midy-arm2.radius,midx,midy-arm2.radius-60,"#000",90,1,4,false,90,false,false,"#000",midx,midy-180);
	subSubArm3 = new playObj(midx,midy-arm1.radius,midx,midy-arm1.radius-60,"#000",60,-1,4,false,0,false,false,"#000",midx,midy-180);

	
	var objArray = [arm1,subArm1,subSubArm1,arm2,subArm2,subSubArm2,arm3,subArm3,subSubArm3];
	
//stuff for mouse input

//beautiful. I love me
$("#start").on("click", function(){if(start){start = false; $("#start").css("background-color","#888");} else {start = true; $("#start").css("background-color","#FFF"); running();}});
$("#trace").on("click", function(e){if(trace){trace = false; $("#trace").css("background-color","#FFF");} else {trace = true; $("#trace").css("background-color","#888");}}).mousedown(function(e){ e.preventDefault();});

	
var sped = 5;
$(slower).click(function(){
	if(arm1.speed==0){$(faster).css("background-color","#FFF");}
	arm1.speed++;
	arm2.speed++;
	sped=10-arm1.speed;
	$("#speedElement").val(sped);
}).mousedown(function(e){ e.preventDefault(); });
$(faster).click(function(){
	if(arm1.speed>0){arm1.speed--;}
	if(arm1.speed==0){$(faster).css("background-color","#888");}
	sped=10-arm1.speed;
	$("#speedElement").val(sped);
}).mousedown(function(e){ e.preventDefault(); });

	
$("#dropdownBG, #dropdown0, #dropdown1, #dropdown2, #dropdown3, #dropdown4, #dropdown5, #dropdown12, #dropdown14, #dropdown16").change(function(){
	var obj = toObj($(this).attr("name"));
	obj.color = $(this).val();
	if($(this).find(":selected").text()=="Off"){obj.radiusOn=false;} else {obj.radiusOn=true;}
	if($(this).attr("name")=="bg"){drawBkgd();} //fixes the background color change glitch
});
	
$("#dropdown6, #dropdown7, #dropdown8, #dropdown9, #dropdown10, #dropdown11, #dropdown13, #dropdown15, #dropdown17").change(function(){
	var obj = toObj($(this).attr("name"));
	obj.endColor = $(this).val();
});
	
$("#subSpeedElement1, #subSpeedElement2, #subSpeedElement3, #subSubSpeedElement1, #subSubSpeedElement2, #subSubSpeedElement3").on("change", function(){

	var obj = toObj($(this).attr("name"));
	obj.speed = $(this).val();
	
}).click(function () {
   $(this).select();
});
	
$("#lengthArm1, #lengthSubArm1, #lengthArm2, #lengthSubArm2, #lengthArm3, #lengthSubArm3, #lengthSubSubArm1, #lengthSubSubArm2, #lengthSubSubArm3").on("change", function(){
	
	var obj = toObj($(this).attr("name"));
	obj.radius = $(this).val();

}).click(function () {
   $(this).select();
});
	
$("#arm1cw, #subArm1cw, #arm2cw, #subArm2cw, #arm3cw, #subArm3cw, #subSubArm1cw, #subSubArm2cw, #subSubArm3cw").click(function(){

	var obj = toObj($(this).attr("name"));
	if(obj.direction==1){$(this).html("CounterClockwise");} else $(this).html("Clockwise");
	obj.direction = obj.direction*-1;
	
});
	
	var supercharged = false;
	var dist2 = "45px";
	var dist3 = "102px";
$(document).ready(function(){$("#arm2on").click();}); //because I'm lazy and I decided after the fact that it should start in the disabled postition.
$("#arm2on, #subArm2on, #subSubArm2on").click(function(){ 
	if(t2hidden){
		t2hidden = false;
		$("#arm2on, #subArm2on, #subSubArm2on").css("background-color","#888");
		if($("#dropdown2").find(":selected").text()=="Off"){arm2.radiusOn=false;} else {arm2.radiusOn=true;}
		if($("#dropdown3").find(":selected").text()=="Off"){subArm2.radiusOn=false;} else {subArm2.radiusOn=true;}
		if($("#dropdown14").find(":selected").text()!="Off"&&supercharged){subSubArm2.radiusOn=true;} else {subSubArm2.radiusOn=false;}
		if($("#arm2Ball").html()=="Ball"){arm2.ballOn=true;}
		if($("#subArm2Ball").html()=="Ball"){subArm2.ballOn=true;}
		if($("#arm2Ball").html()=="Line"){arm2.lineOn=true;}
		if($("#subArm2Ball").html()=="Line"){subArm2.lineOn=true;}
		if($("#subSubArm2Ball").html()=="Ball"){subSubArm2.ballOn=true;}
		if($("#subSubArm2Ball").html()=="Line"){subSubArm2.lineOn=true;}
		$("#dropdown2, #dropdown3, #dropdown14, #dropdown8, #dropdown9, #dropdown15, #subSpeedElement2, #lengthArm2, #lengthSubArm2, #offsetArm2, #offsetSubArm2, #offsetSubSubArm2, #subSubSpeedElement2, #lengthSubSubArm2").prop("disabled", false);
		$("#arm2cw, #subArm2cw, #subSubArm2cw, #arm2Ball, #subArm2Ball, #subSubArm2Ball").css("background-color","#FFF");
		$("#table2").css("bottom", "1px"); //stay
		$("#table3").css("bottom", dist2); 
		$("#bdiv").css("bottom", dist2);

	} else {
		if(!t3hidden){$("#arm3on").click();}
		t2hidden = true;
		$("#arm2on, #subArm2on, #subSubArm2on").css("background-color","#FFF");
		arm2.radiusOn = false;
		subArm2.radiusOn = false;
		subSubArm2.radiusOn = false;
		arm2.ballOn = false;
		subArm2.ballOn = false;
		subSubArm2.ballOn = false;
		arm2.lineOn = false;
		subArm2.lineOn = false;
		subSubArm2.lineOn = false;
		$("#dropdown2, #dropdown3, #dropdown14, #dropdown8, #dropdown9, #dropdown15, #subSpeedElement2, #lengthArm2, #lengthSubArm2, #offsetArm2, #offsetSubArm2, #offsetSubSubArm2, #subSubSpeedElement2, #lengthSubSubArm2").prop("disabled", true);
		$("#arm2cw, #subArm2cw, #subSubArm2cw, #arm2Ball, #subArm2Ball, #subSubArm2Ball").css("background-color","#DDD");
		$("#table2").css("bottom", dist2); 
		$("#table3").css("bottom", dist3); 
		$("#bdiv").css("bottom", dist3);
	}
}).mousedown(function(e){ e.preventDefault(); });
	
$("#arm3on, #subArm3on, #subSubArm3on").click(function(){
	if(t3hidden){
		t3hidden = false;
		$("#arm3on, #subArm3on, #subSubArm3on").css("background-color","#888");
		if($("#dropdown4").find(":selected").text()=="Off"){arm3.radiusOn=false;} else {arm3.radiusOn=true;}
		if($("#dropdown5").find(":selected").text()=="Off"){subArm3.radiusOn=false;} else {subArm3.radiusOn=true;}
		if($("#dropdown16").find(":selected").text()!="Off"&&supercharged){subSubArm3.radiusOn=true;} else {subSubArm3.radiusOn=false;}
		if($("#arm3Ball").html()=="Ball"){arm3.ballOn=true;}
		if($("#subArm3Ball").html()=="Ball"){subArm3.ballOn=true;}
		if($("#arm3Ball").html()=="Line"){arm3.lineOn=true;}
		if($("#subArm3Ball").html()=="Line"){subArm3.lineOn=true;}
		if($("#subSubArm3Ball").html()=="Ball"){subSubArm3.ballOn=true;}
		if($("#subSubArm3Ball").html()=="Line"){subSubArm3.lineOn=true;}
		$("#dropdown4, #dropdown5, #dropdown16, #dropdown10, #dropdown11, #dropdown17, #subSpeedElement3, #lengthArm3, #lengthSubArm3, #offsetArm3, #offsetSubArm3, #offsetSubSubArm3, #subSubSpeedElement3, #lengthSubSubArm3").prop("disabled", false);
		$("#arm3cw, #subArm3cw, #subSubArm3cw, #arm3Ball, #subArm3Ball, #subSubArm3Ball").css("background-color","#FFF");
		$("#table3").css("bottom", "2px");
		$("#bdiv").css("bottom", "1px");

	} else {
		t3hidden = true;
		$("#arm3on, #subArm3on, #subSubArm3on").css("background-color","#FFF");
		arm3.radiusOn = false;
		subArm3.radiusOn = false;
		subSubArm3.radiusOn = false;
		arm3.ballOn = false;
		subArm3.ballOn = false;
		subSubArm3.ballOn = false;
		arm3.lineOn = false;
		subArm3.lineOn = false;
		subSubArm3.lineOn = false;
		$("#dropdown4, #dropdown5, #dropdown16, #dropdown10, #dropdown11, #dropdown17, #subSpeedElement3, #lengthArm3, #lengthSubArm3, #offsetArm3, #offsetSubArm3, #offsetSubSubArm3, #subSubSpeedElement3, #lengthSubSubArm3").prop("disabled", true);
		$("#arm3cw, #subArm3cw, #subSubArm3cw, #arm3Ball, #subArm3Ball, #subSubArm3Ball").css("background-color","#DDD");
		$("#table3").css("bottom", dist2);
		$("#bdiv").css("bottom", dist2);
	}
}).mousedown(function(e){ e.preventDefault(); });
	
$("#offsetArm1, #offsetSubArm1, #offsetArm2, #offsetSubArm2, #offsetArm3, #offsetSubArm3, #offsetSubSubArm1, #offsetSubSubArm2, #offsetSubSubArm3").on("change", function(){
	var obj = toObj($(this).attr("name"));
	obj.offset = $(this).val();
	
}).click(function () {
   $(this).select();
});

	
	//function to make the pulldown thing blink after a while and then never again once clicked.
var blinking = true; 
setTimeout(function(){if(blinking){blinkOn();}},15000);

function blinkOn(){	
	$("#subArm2on, #subSubArm2on").css("background-color", "#ff6a00");
	setTimeout(function(){if(blinking){blinkOff();}}, 500);
}	
	
function blinkOff(){	
	$("#subArm2on, #subSubArm2on").css("background-color", "#fff");
	setTimeout(function(){if(blinking){blinkOn();}}, 500);
}	

$("#subArm2on, #subSubArm2on").click(function(){blinking = false;});
	
	
//listener for endpoint options
$("#arm1Ball, #subArm1Ball, #arm2Ball, #subArm2Ball, #arm3Ball, #subArm3Ball, #subSubArm1Ball, #subSubArm2Ball, #subSubArm3Ball").click(function(){
	var obj = toObj($(this).attr("name"));
	if($(this).html()=="Off"){
		$(this).html("Ball");
		obj.ballOn = true;
	} else if($(this).html()=="Ball"){
		$(this).html("Line");
		obj.ballOn = false;
		obj.lineOn = true;
	} else if($(this).html()=="Line"){
		$(this).html("Off");
		obj.lineOn = false;
	}
}).mousedown(function(e){ e.preventDefault(); });
	
$("#subArm3Ball").click(function(){$("#supercharge").css("display", "inline-block");});
	
$("#supercharge").click(function(){
	if(!supercharged){
		supercharged = true;
		dist2 = "72px";
		dist3 = "160px";
		$("#tr1").css("display", "");
		$("#tr2").css("display", "");
		$("#tr3").css("display", "");
		if(!t2hidden){$("#arm2on").click();} else {$("#arm2on").click().click();}
		subSubArm1.radiusOn = true;
		$("#supercharge").css("background-color","#888");
	} else {
		supercharged = false;
		dist2 = "45px";
		dist3 = "102px";
		$("#tr1").css("display", "none");
		$("#tr2").css("display", "none");
		$("#tr3").css("display", "none");
		subSubArm1.radiusOn = false;
		subSubArm1.ballOn = false;
		subSubArm1.lineOn = false;
		subSubArm2.radiusOn = false;
		subSubArm2.ballOn = false;
		subSubArm2.lineOn = false;
		subSubArm3.radiusOn = false;
		subSubArm3.ballOn = false;
		subSubArm3.lineOn = false;
		$("#supercharge").css("background-color","#FFF");
		if(t2hidden){$("#arm2on").click().click();} else {$("#arm2on").click();}
		
	}
});
	
	//this is to fix how it overwrites an old pattern--it should start anew everytime a change is made.
	
	$("#lengthArm1, #lengthSubArm1, #lengthSubSubArm1, #lengthArm2, #lengthSubArm2, #lengthSubSubArm2, #lengthArm3, #lengthSubArm3, #lengthSubSubArm3,  #offsetArm1, #offsetSubArm1, #offsetSubSubArm1, #offsetArm2, #offsetSubArm2, #offsetSubSubArm2, #offsetArm3, #offsetSubArm3, #offsetSubSubArm3, #subSpeedElement1, #subSubSpeedElement1, #subSpeedElement2, #subSubSpeedElement2, #subSpeedElement3, #subSubSpeedElement3").on("change", function(){setTimeout(function(){drawBkgd();}, 100);});
	
	$("#arm1cw, #subArm1cw, #subSubArm1cw, #arm2cw, #subArm2cw, #subSubArm2cw, #arm3cw, #subArm3cw, #subSubArm3cw, #arm1Ball, #subArm1Ball, #subSubArm1Ball, #arm2Ball, #subArm2Ball, #subSubArm2Ball, #arm3Ball, #subArm3Ball, #subSubArm3Ball").click(function(){setTimeout(function(){drawBkgd();}, 100);});
	
	$("#dropdown0, #dropdown1, #dropdown12, #dropdown2, #dropdown3, #dropdown14, #dropdown4, #dropdown5, #dropdown16").on("change", function(){setTimeout(function(){drawBkgd();}, 100);});
	
	setTimeout(function(){drawBkgd();}, 100);
///////////////////////////////////////////////////////////////////////////////////////////

	
//main function loop

running();

function running(){
	
	i++;
	if(!trace){
		drawBkgd();
	}else{
		for(j=0; j<objArray.length; j++){
			if(objArray[j].radiusOn){objArray[j].draw(bg.color,2);}
			if(objArray[j].ballOn){objArray[j].drawBall(bg.color,6);}
			if(objArray[j].lineOn){objArray[j].drawLine(bg.color,2);}
		}

	}
	
	for(k=0; k<objArray.length; k+=3){
		
		objArray[k].oldradiusxloc = objArray[k].radiusxloc;
		objArray[k].oldradiusyloc = objArray[k].radiusyloc;
		
		objArray[k].spin(objArray[k].direction*(i+parseInt(objArray[k].offset)));

		
		objArray[k+1].xloc = objArray[k].radiusxloc; //setting the x and y center locations of the sub arm
		objArray[k+1].yloc = objArray[k].radiusyloc;
		
		objArray[k+1].oldradiusxloc = objArray[k+1].radiusxloc; //setting the oldradiusxloc of the sub arm
		objArray[k+1].oldradiusyloc = objArray[k+1].radiusyloc;
		
		objArray[k+1].spin(objArray[k+1].speed*objArray[k+1].direction*(i+parseInt(objArray[k+1].offset))); //calling the spin method on the subarm
		
		objArray[k+2].xloc = objArray[k+1].radiusxloc; //setting the x and y center locations of the subSubArm
		objArray[k+2].yloc = objArray[k+1].radiusyloc;
		
		objArray[k+2].oldradiusxloc = objArray[k+2].radiusxloc; //setting the oldradiusxloc of the subSubArm
		objArray[k+2].oldradiusyloc = objArray[k+2].radiusyloc;
		
		objArray[k+2].spin(objArray[k+2].speed*objArray[k+2].direction*(i+parseInt(objArray[k+2].offset))); //calling the spin method on the subSubArm
	}
	
	for(m=0; m<objArray.length; m++){
		if(objArray[m].radiusOn){
		objArray[m].draw(objArray[m].color,4);
		}
		
		if(objArray[m].ballOn){
		objArray[m].drawBall(objArray[m].endColor,8);
		}
		
		if(objArray[m].lineOn){
		objArray[m].drawLine(objArray[m].endColor,4);
		}

	}

	setTimeout(function(){if(start){running();}}, arm1.speed);
}

function drawBkgd(){
			ctx.fillStyle = bg.color;
			ctx.fillRect(0,0,$(canv).width(),$(canv).height());
		}

function toObj(objName){
	
	switch(objName){
		case "bg":
		return bg;
		break;
		case "arm1":
		return arm1;
		break;			
		case "subArm1":
		return subArm1;
		break;
		case "subSubArm1":
		return subSubArm1;
		break;
		case "arm2":
		return arm2;
		break;			
		case "subArm2":
		return subArm2;
		break;
		case "subSubArm2":
		return subSubArm2;
		break;
		case "arm3":
		return arm3;
		break;			
		case "subArm3":
		return subArm3;
		break;
		case "subSubArm3":
		return subSubArm3;
		break;
	}
}
	

</script>


</body>
</html>